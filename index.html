<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Korean Flashcards</title>

<style>
body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, sans-serif;
  background: #eaf6fb;
  color: #003344;
  height: 100vh;
  overflow: hidden;
}

.hidden { display: none; }

.screen {
  height: 100vh;
  padding: 16px;
  box-sizing: border-box;
}

/* ===== グループ選択 ===== */
.group-list {
  display: flex;
  flex-direction: column;
  gap: 14px;
}

.group-btn {
  padding: 20px;
  font-size: 22px;
  background: #cfeeff;
  border-radius: 14px;
  text-align: center;
}

/* ===== チャプター選択（スクロール可） ===== */
#chapterScreen {
  overflow-y: auto;
  padding-bottom: 40px;
}

.chapter-header {
  margin-bottom: 12px;
}

.chapter-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 10px;
}

.chapter-btn {
  padding: 18px 0;
  font-size: 18px;
  background: #d8f1ff;
  border-radius: 10px;
  text-align: center;
}

.chapter-btn.last {
  background: #ffd6e8;
}

/* ===== フラッシュカード ===== */
.card-area {
  height: calc(100vh - 190px);
  display: flex;
  align-items: center;
  justify-content: center;
}

.word-box {
  font-size: 36px;
  text-align: center;
  padding: 20px;
}

/* ===== 下固定エリア ===== */
.bottom-area {
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100%;
  background: #eaf6fb;
  padding: 10px;
  box-sizing: border-box;
}

.chapter-back {
  margin-bottom: 8px;
  text-align: center;
  padding: 12px;
  background: #cfeeff;
  border-radius: 10px;
}

.button-bar {
  display: flex;
  gap: 10px;
}

.action-btn {
  flex: 1;
  padding: 14px 0;
  font-size: 18px;
  background: #bfe6ff;
  border-radius: 10px;
  text-align: center;
  user-select: none;
}

.action-btn:active {
  transform: scale(0.96);
  background: #aadfff;
}
</style>
</head>

<body>

<!-- ① グループ選択 -->
<div id="groupScreen" class="screen">
  <div class="group-list">
    <div class="group-btn" onclick="selectGroup(1)">1–50</div>
    <div class="group-btn" onclick="selectGroup(51)">51–100</div>
    <div class="group-btn" onclick="selectGroup(101)">101–150</div>
  </div>
</div>

<!-- ② 詳細チャプター選択 -->
<div id="chapterScreen" class="screen hidden">
  <div class="chapter-header">
    <div class="chapter-back" onclick="showGroupScreen()">← グループに戻る</div>
  </div>

  <div class="chapter-grid" id="chapterGrid"></div>
</div>

<!-- ③ フラッシュカード -->
<div id="cardScreen" class="screen hidden">
  <div class="card-area">
    <div id="wordBox" class="word-box"></div>
  </div>

  <div class="bottom-area">
    <div class="chapter-back" onclick="showChapterScreen()">チャプターに戻る</div>

    <div class="button-bar">
      <div class="action-btn" onclick="prevWord()">戻る</div>
      <div class="action-btn" onclick="toggleLang()">日本語</div>
      <div class="action-btn" onclick="nextWord()">次</div>
    </div>
  </div>
</div>

<script>
/* ===== 仮データ ===== */
const words = [
  { ko: "공부하다", ja: "勉強する" },
  { ko: "중요하다", ja: "重要だ" },
  { ko: "결정", ja: "決定" },
  { ko: "경험", ja: "経験" },
  { ko: "노력", ja: "努力" },
  { ko: "성공", ja: "成功" },
  { ko: "기회", ja: "機会" },
  { ko: "상황", ja: "状況" },
  { ko: "목표", ja: "目標" },
  { ko: "도전", ja: "挑戦" }
];

let currentGroup = null;
let currentChapter = null;
let currentIndex = 0;
let showJapanese = false;

/* ===== 画面切替 ===== */
function show(id) {
  document.querySelectorAll(".screen").forEach(s => s.classList.add("hidden"));
  document.getElementById(id).classList.remove("hidden");
}

/* ===== グループ ===== */
function selectGroup(start) {
  currentGroup = start;
  renderChapters();
  show("chapterScreen");
}

function showGroupScreen() {
  show("groupScreen");
}

/* ===== チャプター ===== */
function renderChapters() {
  const grid = document.getElementById("chapterGrid");
  grid.innerHTML = "";
  const last = localStorage.getItem("lastChapter");

  for (let i = currentGroup; i < currentGroup + 50; i++) {
    const div = document.createElement("div");
    div.className = "chapter-btn";
    if (String(i) === last) div.classList.add("last");
    div.textContent = i;
    div.onclick = () => selectChapter(i);
    grid.appendChild(div);
  }
}

function selectChapter(num) {
  currentChapter = num;
  localStorage.setItem("lastChapter", num);
  currentIndex = 0;
  showJapanese = false;
  updateWord();
  show("cardScreen");
}

function showChapterScreen() {
  renderChapters(); // ← 色付けを即反映
  show("chapterScreen");
}

/* ===== 単語 ===== */
function updateWord() {
  const w = words[currentIndex];
  document.getElementById("wordBox").textContent =
    showJapanese ? w.ja : w.ko;
}

function toggleLang() {
  showJapanese = !showJapanese;
  updateWord();
}

function nextWord() {
  currentIndex = (currentIndex + 1) % words.length;
  showJapanese = false;
  updateWord();
}

function prevWord() {
  currentIndex = (currentIndex - 1 + words.length) % words.length;
  showJapanese = false;
  updateWord();
}
</script>

</body>
</html>